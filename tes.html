<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Friendly Barcode Scanner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 10px;
            background-color: #f8f8f8;
        }
        #reader {
            width: 100%;
            /* max-width: 600px; */
            margin: 20px auto;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .swal2-actions{
            margin: 1em 1.6em .3em;
        }
        .swal2-confirm {
            outline: none;
        }
    </style>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="reader"></div>

    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="html5-qrcode.min.js"></script>
    <script>
        let html5QrcodeScanner;

        // Increment and decrement functionality
        document.getElementById('increment').addEventListener('click', () => {
                const input = document.getElementById('jumlahProdukInput');
                input.value = parseInt(input.value) + 1;
        });

        document.getElementById('decrement').addEventListener('click', () => {
            const input = document.getElementById('jumlahProdukInput');
            if (parseInt(input.value) > 0) {
                input.value = parseInt(input.value) - 1;
            }
        });

        function onScanSuccess(decodedText, decodedResult) {
            html5QrcodeScanner.pause();  // Pause the scanner
            Swal.fire({
            imageUrl: "https://www.static-src.com/wcsstore/Indraprastha/images/catalog/full//93/MTA-2583228/indomie_indomie-goreng-mie-instan--85g--_full02.jpg",
            imageHeight: 300,
            html: `
                    <div class="kontent max-h-40 overflow-y-auto">
                        <div class="font-bold text-4xl mb-4">
                            Indomie Goreng
                        </div>
                        <div>
                            1 pcs = Rp 3.000 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                            5 pcs = Rp 2.700 <br>
                        </div>
                    </div>

                    <div class="mt-10 mb-4">
                        <div class="relative mt-2 rounded-md shadow-sm">
                            <div id="decrement" class="absolute inset-y-0 left-0 flex items-center pl-3">
                                -
                            </div>
                            <input type="number" name="jumlahProdukInput" id="jumlahProdukInput" class="block w-full text-center rounded-md border-0 py-1.5 pl-7 pr-7 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" value="0">
                            <div id="increment" class="absolute inset-y-0 right-0 flex items-center pr-3">
                                +
                            </div>
                        </div>
                    </div>
                `,
                showCancelButton: true,
                confirmButtonText: '+ Tambahkan',
                cancelButtonText: 'Batal',
                reverseButtons: true,
                customClass: {
                    confirmButton: "flex-1 bg-blue-600 text-white font-bold border-blue-600 py-2 px-4 rounded",
                    cancelButton: "flex-1 text-blue-600 py-2 px-4 mr-4 border border-blue-600 rounded-md"
                },
                buttonsStyling: false
            }).then(() => {
                html5QrcodeScanner.resume();  // Resume the scanner
            });
        }

        function onScanFailure(error) {
            // Optional: handle scan failure (e.g., logging)
        }

        document.addEventListener("DOMContentLoaded", function() {
            html5QrcodeScanner = new Html5QrcodeScanner(
                "reader", { 
                    fps: 10, 
                    qrbox: {
                        width: 400,
                        height: 400
                    },
                    aspectRatio: 1.0,
                    // disableFlip: false // true if you only want to scan from the rear camera
                });
            html5QrcodeScanner.render(onScanSuccess, onScanFailure);
        });
    </script>
</body>
</html>
